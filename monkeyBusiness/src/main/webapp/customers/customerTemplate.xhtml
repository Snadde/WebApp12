<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet library="css" name="default.css"  />
        <h:outputStylesheet library="css" name="cssLayout.css"  />
        <h:outputScript library="./js/lib" name="jquery-1.7.1.min.js"  target="head" />
        <h:outputScript library="./js/events" name="events.js" target="head" /> 
        <title>Facelets Template</title>
    </h:head>

    <h:body>

        <div id="top">
            <ui:insert name="top">                            

            </ui:insert>

            <h:form>

                <h:commandButton value="Logout" 
                                 action="#{simpleLogin.logout()}" />
                <h:outputText value=" Logged in as ${request.remoteUser}" />
                <h:commandLink value=" Edit Profile" 
                               actionListener="#{editCustomerControlBean.actionListener}"
                               action="editProfile?faces-redirect=true">
                    <f:attribute name="customer" value="#{simpleLogin.getCustomer(request.remoteUser)}"/>
                </h:commandLink><br/>    
            </h:form>
        </div>
        <div>
            <div id="left">

                <nav>

                    <h:form>
                        <h:commandLink id="showCart" value="Show Cart" action="/jsf/showCart?faces-redirect=true"
                                       actionListener="#{cartControlBean.actionListener}"/><br/>
                        <h:commandLink value="Purchase Orders" 
                                       action="#{customerPurchaseOrdersControlBean.action(request.remoteUser)}"/><br/>
                    </h:form>
                    <h:link value="Products" outcome="/jsf/shopProducts"/><br/>
                    <h:link value="Search" outcome="/jsf/searchEngine"/><br/>
                    <h:dataTable id="tablefastCart" style="font-size: 10px;" value="#{showCartBackingBean.cartProductList}" 
                                 var="entry" cellpadding="5" cellspacing="1" first="0" width="100px" dir="LTR" frame="hsides" 
                                 rules="all">


                        <h:column>

                            <f:facet name="header">
                                <h:outputText value="Name" />
                            </f:facet> 
                            <h:outputText value="#{entry.key.name}"></h:outputText>
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="No." />
                            </f:facet> 
                            <h:outputText value="#{entry.value}"></h:outputText>
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Cost" />
                            </f:facet> 
                            <h:outputText value="#{entry.value*entry.key.price}"></h:outputText>
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="+/-" />
                            </f:facet> 
                            <h:form>     

                                <h:commandLink id="plusButton" value="+" onclick="addProduct()"
                                               actionListener="#{cartControlBean.actionListener}">
                                    <f:attribute name="prod" value="${entry.key}"/>
                                </h:commandLink>
                                <h:commandLink id="minusButton" value="â€“" onclick="delProduct()"
                                               actionListener="#{cartControlBean.actionListener}">
                                    <f:attribute name="prod" value="${entry.key}"/>
                                </h:commandLink><br/>
                            </h:form>  

                        </h:column>


                    </h:dataTable>              

                    <h:outputText value="Total Cost: #{showCartBackingBean.totalCartCost}"/>

                    <br/><br/>
                    <h:form>
                        <h:commandButton id="buyButton" value="Proceed to checkout" style="background-color: forestgreen; color: #ffffff;"
                                         actionListener="#{cartControlBean.actionListener}"
                                         action="/customers/purchase?faces-redirect=true">
                        </h:commandButton>
                    </h:form>
                </nav>
                <ui:insert name="left">Left</ui:insert>
            </div>
            <div id="content" class="left_content">
                <ui:insert name="content">Content</ui:insert>
            </div>
        </div>
        <div style="clear: both;" />
        <div id="bottom">
            <ui:insert name="bottom">Bottom</ui:insert>
        </div>

    </h:body>

</html>
